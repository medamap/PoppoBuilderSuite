# CCTA (Code Change Test Agent) - ã‚¯ãƒ¼ã¡ã‚ƒã‚“

## æ¦‚è¦

CCTAï¼ˆCode Change Test Agentï¼‰ã¯ã€PoppoBuilder Suiteã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸€ã¤ã§ã€è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¤œè¨¼ã‚’æ‹…å½“ã—ã¾ã™ã€‚æ„›ç§°ã¯ã€Œã‚¯ãƒ¼ã¡ã‚ƒã‚“ã€ã§ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

1. **ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ**
   - å˜ä½“ãƒ†ã‚¹ãƒˆã€çµ±åˆãƒ†ã‚¹ãƒˆã€E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
   - è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¯¾å¿œï¼ˆJestã€Mochaã€Vitestã€Jasmineï¼‰
   - å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ã‚¹ãƒˆã®è‡ªå‹•æ¤œå‡º

2. **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**
   - è¡Œã€æ–‡ã€é–¢æ•°ã€åˆ†å²ã®ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
   - é–¾å€¤ãƒã‚§ãƒƒã‚¯ã¨é•åæ¤œå‡º
   - ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒãƒƒã‚¸ã®æ›´æ–°
   - ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ã®æ¯”è¼ƒ

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚é–“ã®æ¸¬å®š
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®è¿½è·¡
   - ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®åˆ†æ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ³ãƒ‰ã®è¿½è·¡

4. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**
   - Markdownå½¢å¼ã®äººé–“ãŒèª­ã¿ã‚„ã™ã„ãƒ¬ãƒãƒ¼ãƒˆ
   - JSONå½¢å¼ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
   - HTMLå½¢å¼ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ
   - GitHubã‚³ãƒ¡ãƒ³ãƒˆã¸ã®è‡ªå‹•æŠ•ç¨¿

## ä½¿ç”¨æ–¹æ³•

### ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³èµ·å‹•

```bash
# ãƒ‡ãƒ¼ãƒ¢ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
node scripts/start-ccta.js

# å˜ç™ºå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
node scripts/start-ccta.js once

# ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
DEMO_MODE=true node scripts/start-ccta.js
```

### PoppoBuilderã¨ã®çµ±åˆ

ä»¥ä¸‹ã®ãƒ©ãƒ™ãƒ«ã¾ãŸã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€IssueãŒè‡ªå‹•çš„ã«CCTAã«æŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œã¾ã™ï¼š

- **ãƒ©ãƒ™ãƒ«**: `test`, `coverage`, `performance`
- **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**: ãƒ†ã‚¹ãƒˆã€testã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã€coverageã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€performance

### ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
export CCTA_FRAMEWORKS="jest,mocha"

# ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤
export CCTA_COVERAGE_BRANCHES=80
export CCTA_COVERAGE_FUNCTIONS=80
export CCTA_COVERAGE_LINES=80
export CCTA_COVERAGE_STATEMENTS=80

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é–¾å€¤
export CCTA_PERF_LOAD_TIME=3000      # ms
export CCTA_PERF_MEMORY=100          # MB
export CCTA_PERF_BUNDLE_SIZE=500     # KB

# ãã®ä»–
export CCTA_AUTO_FIX=false
export CCTA_TIMEOUT=300000           # 5åˆ†
```

## ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—

### 1. PR ãƒ†ã‚¹ãƒˆ (`pr_test`)
Pull Requestã«é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
- å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œå‡º
- å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ã‚¹ãƒˆã®ç‰¹å®š
- ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ
- å¿…è¦ã«å¿œã˜ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### 2. ã‚³ãƒŸãƒƒãƒˆãƒ†ã‚¹ãƒˆ (`commit_test`)
ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã™ã‚‹ç°¡æ˜“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
- ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®å®Ÿè¡Œ
- åŸºæœ¬çš„ãªå‹•ä½œç¢ºèª
- çŸ­æ™‚é–“ã§ã®å®Ÿè¡Œï¼ˆ1åˆ†ä»¥å†…ï¼‰

### 3. ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆ (`full_test`)
ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
- å…¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®å®Ÿè¡Œ
- è©³ç´°ãªã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒãƒƒã‚¸ã®æ›´æ–°
- é–¾å€¤ãƒã‚§ãƒƒã‚¯

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ (`performance_test`)
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¸¬å®šã—ã¾ã™ã€‚
- ãƒ­ãƒ¼ãƒ‰æ™‚é–“ã®æ¸¬å®š
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®è¿½è·¡
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®åˆ†æ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ³ãƒ‰ã®ç”Ÿæˆ

### 5. ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒã‚§ãƒƒã‚¯ (`coverage_check`)
ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’åˆ†æã—ã¾ã™ã€‚
- ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ã®æ¯”è¼ƒ
- ã‚«ãƒãƒ¬ãƒƒã‚¸æ”¹å–„ã®ææ¡ˆ
- æœªã‚«ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã®ç‰¹å®š

## ãƒ¬ãƒãƒ¼ãƒˆå½¢å¼

### Markdownãƒ¬ãƒãƒ¼ãƒˆä¾‹

```markdown
# âœ… ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ

**å®Ÿè¡Œæ—¥æ™‚**: 2025/6/20 10:30:00
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: full_test
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æˆåŠŸ

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | å€¤ |
|------------|-----|
| ç·ãƒ†ã‚¹ãƒˆæ•° | 150 |
| æˆåŠŸ | 148 |
| å¤±æ•— | 2 |
| ã‚¹ã‚­ãƒƒãƒ— | 0 |
| å®Ÿè¡Œæ™‚é–“ | 45.2s |

## ğŸ“ˆ ã‚«ãƒãƒ¬ãƒƒã‚¸

| ã‚¿ã‚¤ãƒ— | ã‚«ãƒãƒ¬ãƒƒã‚¸ |
|--------|-----------|
| è¡Œ | 85.3% |
| æ–‡ | 84.7% |
| é–¢æ•° | 88.1% |
| åˆ†å² | 79.5% |
| é–¾å€¤é”æˆ | âœ… |

## ğŸ’¡ æ¨å¥¨äº‹é …

- 2å€‹ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚
- åˆ†å²ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ80%ã‚’ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚æ¡ä»¶åˆ†å²ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
```

## è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

```json
{
  "agents": {
    "ccta": {
      "frameworks": ["jest", "mocha"],
      "coverageThreshold": {
        "global": {
          "branches": 80,
          "functions": 80,
          "lines": 80,
          "statements": 80
        }
      },
      "performanceThreshold": {
        "loadTime": 3000,
        "memoryUsage": 100,
        "bundleSize": 500
      },
      "autoFix": false,
      "skipTests": [],
      "timeout": 300000,
      "reportsDir": "test-reports",
      "resultsDir": "performance-results"
    }
  }
}
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œãªã„
1. ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. `package.json`ã®`test`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç¢ºèª
3. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£ã—ã„ã‹ç¢ºèª

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒç”Ÿæˆã•ã‚Œãªã„
1. ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«ï¼ˆnycã€c8ãªã©ï¼‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚«ãƒãƒ¬ãƒƒã‚¸è¨­å®šã‚’ç¢ºèª
3. `--coverage`ãƒ•ãƒ©ã‚°ãŒæ­£ã—ãæ¸¡ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
1. å¿…è¦ãªãƒãƒ¼ãƒˆï¼ˆ3000ãªã©ï¼‰ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã‚’å¢—ã‚„ã—ã¦ã¿ã‚‹

## æ‹¡å¼µæ–¹æ³•

### æ–°ã—ã„ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®è¿½åŠ 

`test-runner.js`ã«æ–°ã—ã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼š

```javascript
async runNewFramework(options) {
  // å®Ÿè£…
}
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚·ãƒŠãƒªã‚ª

`config.json`ã§ã‚·ãƒŠãƒªã‚ªã‚’å®šç¾©ï¼š

```json
{
  "scenarios": {
    "custom": {
      "type": "custom",
      "custom": async () => {
        // ã‚«ã‚¹ã‚¿ãƒ æ¸¬å®šãƒ­ã‚¸ãƒƒã‚¯
        return { metric: value };
      }
    }
  }
}
```

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [PoppoBuilder Suite ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](../architecture/agent-architecture.md)
- [CCQA ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ](ccqa-agent.md) - ã‚³ãƒ¼ãƒ‰å“è³ªä¿è¨¼
- [CCRA ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ](ccra-agent.md) - ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼è‡ªå‹•åŒ–