# Traceability GitHub Integration Guide

## Overview

Traceability Phase 3 provides functionality to automatically link GitHub Issues/PRs with traceability items.

## Key Features

### 1. Automatic ID Extraction
- Automatically extracts PBS-XXX-nnn format IDs from Issue/PR body
- ID extraction from commit messages
- Automatic creation of bidirectional links

### 2. GitHub Synchronization
- Associates Issues/PRs with traceability items
- Generates synchronization status reports
- Automatic comment posting to GitHub

## Usage

### Synchronizing Issues/PRs

```bash
# Sync all issues
npm run trace github sync

# Sync specific issue
npm run trace github sync-issue 52

# Sync specific PR
npm run trace github sync-pr 123
```

### Manual Link Creation

```bash
# Link traceability item to issue
npm run trace github link PBS-REQ-001 52
```

This command:
1. Links PBS-REQ-001 to Issue #52
2. Posts traceability information as a comment on Issue #52

### ID Extraction from Commit Messages

```bash
# Extract IDs from latest 50 commits (default)
npm run trace github commits

# Extract IDs from latest 100 commits
npm run trace github commits 100
```

### Generate Sync Report

```bash
npm run trace github report
```

The report includes:
- Number of GitHub-linked items
- Total related Issues/PRs
- Link details (related Issues/PRs for each item)

## Best Practices

### 1. Including IDs in Issues/PRs

Include traceability IDs in issue body:

```markdown
## Overview
Implementing PBS-REQ-001.

## Implementation Details
- PBS-SPEC-001: Basic functionality implementation
- PBS-SPEC-002: Extended functionality implementation
```

### 2. Including IDs in Commit Messages

```bash
git commit -m "feat: PBS-IMP-001 Implement GitHub sync functionality"
```

### 3. Regular Synchronization

```bash
# Schedule regular execution with cron etc.
npm run trace github sync
```

## Example Traceability Comment

When linked to an issue, the following comment is automatically posted:

```markdown
## ðŸ”— Traceability Update

This issue has been linked to the following traceability item:

- **ID**: PBS-REQ-001
- **Phase**: REQ
- **Title**: Traceability Feature Implementation
- **Description**: Tracking functionality from requirements to implementation

### Related Items
- **implements**: PBS-SPEC-001, PBS-SPEC-002
- **Related Issues**: #52

---
*This comment was automatically generated by the traceability system*
```

## Troubleshooting

### GitHub CLI Not Available

```bash
# Install GitHub CLI
brew install gh

# Authenticate
gh auth login
```

### Sync Failures

1. Check GitHub CLI authentication status
2. Verify repository access permissions
3. Confirm Issue/PR numbers are correct

## Notes

- GitHub metadata is stored in `.poppo/traceability.yaml`
- Sync only adds links, does not remove them
- Comment posting does not check for duplicates (improvement planned)